<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Quick and easy tool to gather public IPv4 and IPv6 information.">
  <title>IP Lookup Tool - justinverstijnen.nl</title>
  <link rel="stylesheet" href="iplookuptool/assets/style.css">
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <link rel="icon" type="image/png" href="https://justinverstijnen.nl/wp-content/uploads/2025/04/cropped-Logo-2.0-final.png">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4082816808518335" crossorigin="anonymous"></script>
</head>
<body>
<div class="container">
<div class="logo">
<a href="https://justinverstijnen.nl" target="_blank">
<img src="https://justinverstijnen.nl/wp-content/uploads/2025/04/cropped-Logo-2.0-Transparant.png" width="50" height="50">
</a>
</div>

<h1>IP Lookup Tool</h1>
<p class="subtitle">Quick and easy tool to gather public IPv4 and IPv6 information.</p>

<div id="myIpShown" style="font-size:22px;font-weight:600;margin-bottom:10px;"></div>

<div class="form-group">
<input type="text" id="ipInput" placeholder="Enter IP address"/>

<button onclick="lookupIP()"><i class="ph ph-magnifying-glass"></i> Lookup</button>
<button id="useMyIpBtn" class="orange-btn"><i class="ph ph-crosshair"></i> Use my IP</button>
<button onclick="exportResult()"><i class="ph ph-download"></i> Export</button>
</div>

<div id="result" class="result"></div>

<div class="footer">
<a href="https://github.com/JustinVerstijnen/IPLookupTool" target="_blank">
&copy; <span id="copyright-year"></span> IP Lookup Tool by Justin Verstijnen
</a>
</div>
</div>

<script>
document.getElementById("ipInput").addEventListener("keypress", e => {
if(e.key === "Enter") lookupIP();
});

async function lookupIP(ipOverride=null){

const ip = ipOverride || document.getElementById("ipInput").value.trim();
const resultDiv = document.getElementById("result");

if(!ip){
resultDiv.innerHTML="<div class='error'>Please enter IP.</div>";
return;
}

resultDiv.innerHTML="Loading...";

try{

const response = await fetch(`https://ipapi.co/${encodeURIComponent(ip)}/json/`);
const data = await response.json();

if(data.error){
resultDiv.innerHTML="<div class='error'>Invalid IP.</div>";
return;
}

resultDiv.innerHTML=`
<div class="fade-in">
<div class="table-wrapper">
<table><tbody>
<tr><td><strong>IP:</strong></td><td>${data.ip}</td></tr>
<tr><td><strong>Version:</strong></td><td>${data.version || "-"}</td></tr>
<tr><td><strong>Country:</strong></td><td>${data.country_name}</td></tr>
<tr><td><strong>Region:</strong></td><td>${data.region}</td></tr>
<tr><td><strong>City:</strong></td><td>${data.city}</td></tr>
<tr><td><strong>Latitude:</strong></td><td>${data.latitude}</td></tr>
<tr><td><strong>Longitude:</strong></td><td>${data.longitude}</td></tr>
<tr><td><strong>Org:</strong></td><td>${data.org}</td></tr>
<tr><td><strong>Timezone:</strong></td><td>${data.timezone}</td></tr>
<tr><td><strong>Currency:</strong></td><td>${data.currency}</td></tr>
</tbody></table>
</div>
</div>
`;

window.latestData=data;

}catch(e){
resultDiv.innerHTML="<div class='error'>API error.</div>";
console.error(e);
}
}

function exportResult(){
if(!window.latestData){alert("No data.");return;}
const w=window.open("assets/export.html");
w.onload=()=>w.postMessage(window.latestData,"*");
}

window.addEventListener("load",async()=>{
document.getElementById("copyright-year").textContent=new Date().getFullYear();

try{
const r=await fetch("https://ipapi.co/json/");
const d=await r.json();
document.getElementById("myIpShown").textContent=`My IP: ${d.ip}`;
document.getElementById("useMyIpBtn").onclick=()=>{
document.getElementById("ipInput").value=d.ip;
lookupIP(d.ip);
};
}catch{}
});
</script>
</body>
</html>
